# Environment Configuration
# For development: NODE_ENV=development, BUILD_TARGET=development
# For production:  NODE_ENV=production, BUILD_TARGET=production

NODE_ENV=local
PORT=3000
BUILD_TARGET=local

# Volume configuration
# Development: VOLUME_SRC=./src, VOLUME_TARGET=/app/src
# Production:  VOLUME_SRC=./logs, VOLUME_TARGET=/app/logs
VOLUME_SRC=./src
VOLUME_TARGET=/app/src

# MySQL Database Configuration
MYSQL_ROOT_PASSWORD=rootpassword
MYSQL_DATABASE=myapp
MYSQL_USER=appuser
MYSQL_PASSWORD=apppassword
MYSQL_PORT=3306

# Application Database Connection
# DB_HOST: Use 'mysql' for Docker Compose, 'localhost' for local development
DB_HOST=mysql
DB_PORT=3306
DB_NAME=myapp
DB_USER=appuser
DB_USERNAME=appuser
DB_PASSWORD=apppassword
DB_DIALECT=mysql

# Database Replication Configuration (optional)
# Set DB_REPLICATION=true to enable read/write splitting
DB_REPLICATION=false

# Write Database (Master/Primary)
DB_WRITE_HOST=mysql-master
DB_WRITE_PORT=3306
DB_WRITE_USER=appuser
DB_WRITE_PASSWORD=apppassword

# Read Database Replicas (Slaves/Secondaries)
# For multiple replicas, use comma-separated values
DB_READ_HOSTS=mysql-replica-1,mysql-replica-2
DB_READ_PORTS=3306,3306
DB_READ_USERS=appuser,appuser
DB_READ_PASSWORDS=apppassword,apppassword

# Database Pool Configuration (optional)
DB_POOL_MAX=10
DB_POOL_MIN=0
DB_POOL_ACQUIRE=30000
DB_POOL_IDLE=10000

# Database Options (optional)
DB_LOGGING=false
DB_TIMEZONE=+00:00
DB_CHARSET=utf8mb4
DB_COLLATE=utf8mb4_unicode_ci
DB_CONNECT_TIMEOUT=10000
DB_BENCHMARK=false
DB_RETRY_MAX=3

# Database Model Options (optional)
DB_UNDERSCORED=false
DB_FREEZE_TABLE_NAME=false
DB_PARANOID=false

# Database SSL Configuration (production)
DB_SSL=false
DB_SSL_REJECT_UNAUTHORIZED=true

# ====================================
# Logging Configuration
# ====================================
LOG_LEVEL=debug

# Enable/Disable different logger types (true/false)
LOG_CONSOLE_ENABLED=true
LOG_FILE_ERROR_ENABLED=true
LOG_FILE_INFO_ENABLED=true
LOG_FILE_COMBINED_ENABLED=true
LOG_EXCEPTION_ENABLED=true
LOG_REJECTION_ENABLED=true
LOG_HTTP_ENABLED=true

# Log file configuration
LOG_FILE_MAX_SIZE=20m
LOG_FILE_MAX_DAYS=14d
LOG_FILE_DATE_PATTERN=YYYY-MM-DD

# ====================================
# Monitoring Configuration
# ====================================
# Enable/Disable Prometheus metrics and monitoring endpoints
# When disabled, /api/v1/metrics endpoint will not be available
# and metrics collection middleware will be bypassed
MONITORING_ENABLED=true

# ====================================
# New Relic APM Configuration
# ====================================
# Enable/Disable New Relic APM monitoring
NEW_RELIC_ENABLED=false

# New Relic License Key (required when enabled)
# Get your license key from: https://one.newrelic.com/admin-portal/api-keys/home
NEW_RELIC_LICENSE_KEY=your_new_relic_license_key_here

# Application name in New Relic (will appear in New Relic dashboard)
NEW_RELIC_APP_NAME=node-architecture

# New Relic log level: trace, debug, info, warn, error, fatal
NEW_RELIC_LOG_LEVEL=info

# Enable/Disable distributed tracing
NEW_RELIC_DISTRIBUTED_TRACING_ENABLED=true

# Enable/Disable New Relic logging to file
NEW_RELIC_LOGGING_ENABLED=true

# CORS Configuration
# Set allowed origin for Cross-Origin Resource Sharing
# For development: http://localhost:3000 or http://localhost:4200
# For production: https://yourapp.com (your actual frontend domain)
# For multiple origins: Implement custom logic in app.ts
CORS_ORIGIN=http://localhost:3000

# JWT Configuration
# SECURITY WARNING: NEVER use these placeholder values in production!
# Generate secure random secrets using one of these methods:
#   Method 1 (Node.js): node -e "console.log(require('crypto').randomBytes(64).toString('hex'))"
#   Method 2 (OpenSSL): openssl rand -hex 64
#   Method 3 (Online):  Use a secure random generator (ensure HTTPS connection)
#
# Each secret MUST be unique and at least 64 characters long
JWT_SECRET=REPLACE_WITH_SECURE_RANDOM_SECRET_MINIMUM_64_CHARS
JWT_REFRESH_SECRET=REPLACE_WITH_DIFFERENT_SECURE_RANDOM_SECRET_MINIMUM_64_CHARS
JWT_ACCESS_TOKEN_EXPIRY=15m
JWT_REFRESH_TOKEN_EXPIRY=7d
JWT_ISSUER=node-architecture-app
JWT_AUDIENCE=node-architecture-users
